    # Jake Yeung
    # Date of Creation: 2018-10-28
    # File: ~/projects/4c_seq/scripts/primetime_animations/animate_around_the_clock.R
    # Animate batch 3 around the clock
    # Stolen from: ~/projects/4c_seq/scripts/batch3_4cseq_analysis/load_robj_plot_summary.batch3.WT_vs_Cry1intronKO.R


    rm(list=ls())
    jstart <- Sys.time()


    library(here)
    library(ggplot2)
    library(gganimate)
    library(tweenr)
    library(transformr)
    library(dplyr)
    library(PhaseHSV)
    library(Circadian4Cseq)



    MakeAnimation <- function(jsub.orig, nf = 20, ks = 0, jfps = 20, vline = -28000,
                              plot.base = "/Users/yeung/projects/4c_seq_analysis/WT_plot"){
      plot.out <- paste0(plot.base, ".fixed.pdf")
      anim.out <- paste0(plot.base, ".fps.", jfps, ".fixed_rotated.11.5.gif")
      jsub <- split(jsub.orig, jsub.orig$time)
      # Here comes tweenr
      jsub_tween <- jsub$ZT00 %>% 
        tween_state(jsub$ZT04, ease = 'linear', nframes = nf) %>% 
        keep_state(ks) %>%
        tween_state(jsub$ZT08, ease = 'linear', nframes = nf) %>% 
        keep_state(ks) %>%
        tween_state(jsub$ZT12, ease = 'linear', nframes = nf) %>% 
        keep_state(ks) %>%
        tween_state(jsub$ZT16, ease = 'linear', nframes = nf) %>% 
        keep_state(ks) %>%
        tween_state(jsub$ZT20, ease = 'linear', nframes = nf) %>%
        keep_state(ks) %>%
        tween_state(jsub$ZT00, ease = 'linear', nframes = nf)
      
      # plot
      ltype <- "solid"; jtitle <- "ZT"
      jaspect.ratio <- 0.25
      zts <- seq(0, 20, 4)
      rotate.hrs <- -8
      zts.rotated <- RotatePhase(zts, rotate.hr = rotate.hrs)
      hex.cols <- hsv(PhaseToHsv(zts.rotated, 0, 24), 1, 1)
      # change yellow to darker yellow
      zt11.rotated <- RotatePhase(11.5, rotate.hr = rotate.hrs)
      zt11.col <- hsv(PhaseToHsv(zt11.rotated, 0, 24), 1, 1)
      # hex.cols[which(hex.cols == "#FFFF00")] <- "#FFD500"
      hex.cols[which(hex.cols == "#FFFF00")] <- zt11.col
      
      p.orig <- ggplot(jsub.orig, aes(x = pos, y = A, colour = time)) + 
        geom_line(data = subset(jsub.orig, LR == "Left"), aes(x = pos, y = A, colour = time), linetype = ltype) + 
        geom_line(data = subset(jsub.orig, LR == "Right"), aes(x = pos, y = A, colour = time), linetype = ltype) + 
        theme(aspect.ratio = 0.25) + geom_hline(aes(yintercept=0)) + 
        theme_bw() + ggtitle(jtitle) + geom_vline(aes(xintercept=vline), linetype="dotted") + 
        theme(legend.position = "bottom") + 
        xlab("Position relative to bait") + 
        ylab("Log10 Signal") + 
        theme(aspect.ratio = jaspect.ratio, strip.background = element_blank(),strip.text.y = element_blank()) + 
        scale_color_manual(values = hex.cols) +
        scale_x_continuous(labels=bToKb()) + 
        labs(x = "Position relative to bait [kb]",
             y = expression('4C signal [log'[10]*']')) + 
        theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())
      ggsave(filename = plot.out)
      
      jsub_tween <- jsub_tween %>%
        mutate(.ZT = signif(.frame * ((2 * pi) / 120) * (24 / (2 * pi)), digits = 2))
      
      # hex.cols.blue <- rep("#0000ff", 6)
      p <- ggplot(jsub_tween, aes(x = pos, y = A, colour = time)) + 
        geom_line(data = subset(jsub_tween, LR == "Left"), aes(x = pos, y = A, colour = time), linetype = ltype) + 
        geom_line(data = subset(jsub_tween, LR == "Right"), aes(x = pos, y = A, colour = time), linetype = ltype) + 
        theme(aspect.ratio = 0.25) + geom_hline(aes(yintercept=0)) + 
        theme_bw() + ggtitle(jtitle) + geom_vline(aes(xintercept=-28000), linetype="dotted") + 
        theme(legend.position = "bottom") + 
        xlab("Position relative to bait") + 
        ylab("Log10 Signal") + 
        theme(aspect.ratio = jaspect.ratio, strip.background = element_blank(),strip.text.y = element_blank()) + 
        scale_color_manual(values = hex.cols) +
        scale_x_continuous(labels=bToKb()) + 
        labs(x = "Position relative to bait [kb]",
             y = expression('4C signal [log'[10]*']'),
             # title = "ZT: {closest_state}") +
             title = "ZT: {frame_time}") +
        theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank()) + 
        transition_time(.ZT) +
        # transition_states(.ZT, transition_length = 1, state_length = 0) + 
        ease_aes('linear')
      animate(p, renderer = gifski_renderer(), fps = jfps)
      anim_save(filename = anim.out)
      return(p)
    }




    # Try to animate ----------------------------------------------------------


    # load("/Users/yeung/projects/4c_seq_analysis/counts.long.merged.Robj", v=T)
    data(counts.long.merged.Robj)


    jsig <- 2500
    pos.max <- 1e5
    jsub.orig <- subset(counts.long.merged, sig == jsig & genotype == "Liver_WT" & abs(pos) < pos.max)

    nf <- 20
    ks <- 0
    jfps <- 22

    outdir <- "gifs_outputs_test"
    dir.create(outdir)

    ## Warning in dir.create(outdir): 'gifs_outputs_test' already exists

    p.WT <- MakeAnimation(subset(counts.long.merged, sig == jsig & genotype == "Liver_WT" & abs(pos) < pos.max),
                          nf = nf, ks = ks, jfps = jfps, 
                          plot.base = file.path(outdir, "WT_plot"))

    ## Saving 7 x 5 in image

    ## 
    Rendering [>--------------------------------------------------------------------------------------] at 2.9 fps ~ eta: 35s
    Rendering [=>-------------------------------------------------------------------------------------] at 2.7 fps ~ eta: 37s
    Rendering [==>------------------------------------------------------------------------------------] at 2.7 fps ~ eta: 36s
    Rendering [==>------------------------------------------------------------------------------------] at 2.7 fps ~ eta: 35s
    Rendering [===>-----------------------------------------------------------------------------------] at 2.8 fps ~ eta: 34s
    Rendering [====>----------------------------------------------------------------------------------] at 2.7 fps ~ eta: 35s
    Rendering [=====>---------------------------------------------------------------------------------] at 2.7 fps ~ eta: 34s
    Rendering [======>--------------------------------------------------------------------------------] at 2.7 fps ~ eta: 34s
    Rendering [=======>-------------------------------------------------------------------------------] at 2.7 fps ~ eta: 33s
    Rendering [========>------------------------------------------------------------------------------] at 2.7 fps ~ eta: 33s
    Rendering [=========>-----------------------------------------------------------------------------] at 2.7 fps ~ eta: 33s
    Rendering [=========>-----------------------------------------------------------------------------] at 2.7 fps ~ eta: 32s
    Rendering [==========>----------------------------------------------------------------------------] at 2.7 fps ~ eta: 32s
    Rendering [===========>---------------------------------------------------------------------------] at 2.7 fps ~ eta: 32s
    Rendering [============>--------------------------------------------------------------------------] at 2.7 fps ~ eta: 31s
    Rendering [=============>-------------------------------------------------------------------------] at 2.8 fps ~ eta: 30s
    Rendering [==============>------------------------------------------------------------------------] at 2.8 fps ~ eta: 30s
    Rendering [===============>-----------------------------------------------------------------------] at 2.8 fps ~ eta: 30s
    Rendering [================>----------------------------------------------------------------------] at 2.8 fps ~ eta: 29s
    Rendering [=================>---------------------------------------------------------------------] at 2.8 fps ~ eta: 29s
    Rendering [==================>--------------------------------------------------------------------] at 2.8 fps ~ eta: 28s
    Rendering [===================>-------------------------------------------------------------------] at 2.8 fps ~ eta: 28s
    Rendering [====================>------------------------------------------------------------------] at 2.8 fps ~ eta: 27s
    Rendering [=====================>-----------------------------------------------------------------] at 2.8 fps ~ eta: 27s
    Rendering [======================>----------------------------------------------------------------] at 2.8 fps ~ eta: 27s
    Rendering [======================>----------------------------------------------------------------] at 2.8 fps ~ eta: 26s
    Rendering [=======================>---------------------------------------------------------------] at 2.8 fps ~ eta: 26s
    Rendering [========================>--------------------------------------------------------------] at 2.8 fps ~ eta: 26s
    Rendering [=========================>-------------------------------------------------------------] at 2.8 fps ~ eta: 25s
    Rendering [==========================>------------------------------------------------------------] at 2.8 fps ~ eta: 25s
    Rendering [===========================>-----------------------------------------------------------] at 2.8 fps ~ eta: 25s
    Rendering [============================>----------------------------------------------------------] at 2.8 fps ~ eta: 24s
    Rendering [=============================>---------------------------------------------------------] at 2.8 fps ~ eta: 24s
    Rendering [==============================>--------------------------------------------------------] at 2.8 fps ~ eta: 23s
    Rendering [===============================>-------------------------------------------------------] at 2.8 fps ~ eta: 23s
    Rendering [================================>------------------------------------------------------] at 2.8 fps ~ eta: 22s
    Rendering [=================================>-----------------------------------------------------] at 2.8 fps ~ eta: 22s
    Rendering [==================================>----------------------------------------------------] at 2.8 fps ~ eta: 22s
    Rendering [===================================>---------------------------------------------------] at 2.8 fps ~ eta: 21s
    Rendering [====================================>--------------------------------------------------] at 2.8 fps ~ eta: 21s
    Rendering [=====================================>-------------------------------------------------] at 2.8 fps ~ eta: 20s
    Rendering [======================================>------------------------------------------------] at 2.8 fps ~ eta: 20s
    Rendering [=======================================>-----------------------------------------------] at 2.7 fps ~ eta: 20s
    Rendering [========================================>----------------------------------------------] at 2.7 fps ~ eta: 19s
    Rendering [=========================================>---------------------------------------------] at 2.7 fps ~ eta: 19s
    Rendering [==========================================>--------------------------------------------] at 2.7 fps ~ eta: 19s
    Rendering [===========================================>-------------------------------------------] at 2.7 fps ~ eta: 18s
    Rendering [============================================>------------------------------------------] at 2.7 fps ~ eta: 18s
    Rendering [=============================================>-----------------------------------------] at 2.7 fps ~ eta: 17s
    Rendering [==============================================>----------------------------------------] at 2.7 fps ~ eta: 17s
    Rendering [===============================================>---------------------------------------] at 2.7 fps ~ eta: 17s
    Rendering [================================================>--------------------------------------] at 2.7 fps ~ eta: 16s
    Rendering [=================================================>-------------------------------------] at 2.7 fps ~ eta: 16s
    Rendering [==================================================>------------------------------------] at 2.7 fps ~ eta: 15s
    Rendering [===================================================>-----------------------------------] at 2.7 fps ~ eta: 15s
    Rendering [====================================================>----------------------------------] at 2.6 fps ~ eta: 15s
    Rendering [=====================================================>---------------------------------] at 2.6 fps ~ eta: 14s
    Rendering [======================================================>--------------------------------] at 2.6 fps ~ eta: 14s
    Rendering [=======================================================>-------------------------------] at 2.6 fps ~ eta: 14s
    Rendering [========================================================>------------------------------] at 2.6 fps ~ eta: 13s
    Rendering [=========================================================>-----------------------------] at 2.6 fps ~ eta: 13s
    Rendering [==========================================================>----------------------------] at 2.6 fps ~ eta: 12s
    Rendering [===========================================================>---------------------------] at 2.6 fps ~ eta: 12s
    Rendering [============================================================>--------------------------] at 2.6 fps ~ eta: 12s
    Rendering [=============================================================>-------------------------] at 2.5 fps ~ eta: 12s
    Rendering [==============================================================>------------------------] at 2.5 fps ~ eta: 11s
    Rendering [===============================================================>-----------------------] at 2.4 fps ~ eta: 11s
    Rendering [================================================================>----------------------] at 2.4 fps ~ eta: 10s
    Rendering [=================================================================>---------------------] at 2.4 fps ~ eta: 10s
    Rendering [==================================================================>--------------------] at 2.4 fps ~ eta: 10s
    Rendering [===================================================================>-------------------] at 2.4 fps ~ eta:  9s
    Rendering [====================================================================>------------------] at 2.4 fps ~ eta:  9s
    Rendering [=====================================================================>-----------------] at 2.4 fps ~ eta:  8s
    Rendering [======================================================================>----------------] at 2.4 fps ~ eta:  8s
    Rendering [=======================================================================>---------------] at 2.4 fps ~ eta:  7s
    Rendering [========================================================================>--------------] at 2.4 fps ~ eta:  7s
    Rendering [=========================================================================>-------------] at 2.4 fps ~ eta:  6s
    Rendering [==========================================================================>------------] at 2.4 fps ~ eta:  6s
    Rendering [===========================================================================>-----------] at 2.4 fps ~ eta:  6s
    Rendering [============================================================================>----------] at 2.4 fps ~ eta:  5s
    Rendering [=============================================================================>---------] at 2.4 fps ~ eta:  4s
    Rendering [==============================================================================>--------] at 2.4 fps ~ eta:  4s
    Rendering [===============================================================================>-------] at 2.3 fps ~ eta:  3s
    Rendering [================================================================================>------] at 2.3 fps ~ eta:  3s
    Rendering [=================================================================================>-----] at 2.3 fps ~ eta:  3s
    Rendering [==================================================================================>----] at 2.3 fps ~ eta:  2s
    Rendering [===================================================================================>---] at 2.3 fps ~ eta:  2s
    Rendering [===================================================================================>---] at 2.3 fps ~ eta:  1s
    Rendering [====================================================================================>--] at 2.3 fps ~ eta:  1s
    Rendering [=====================================================================================>-] at 2.3 fps ~ eta:  0s
    Rendering [=======================================================================================] at 2.3 fps ~ eta:  0s
                                                                                                                             

    ## 
    Frame 1 (1%)
    Frame 2 (2%)
    Frame 3 (3%)
    Frame 4 (4%)
    Frame 5 (5%)
    Frame 6 (6%)
    Frame 7 (7%)
    Frame 8 (8%)
    Frame 9 (9%)
    Frame 10 (10%)
    Frame 11 (11%)
    Frame 12 (12%)
    Frame 13 (13%)
    Frame 14 (14%)
    Frame 15 (15%)
    Frame 16 (16%)
    Frame 17 (17%)
    Frame 18 (18%)
    Frame 19 (19%)
    Frame 20 (20%)
    Frame 21 (21%)
    Frame 22 (22%)
    Frame 23 (23%)
    Frame 24 (24%)
    Frame 25 (25%)
    Frame 26 (26%)
    Frame 27 (27%)
    Frame 28 (28%)
    Frame 29 (29%)
    Frame 30 (30%)
    Frame 31 (31%)
    Frame 32 (32%)
    Frame 33 (33%)
    Frame 34 (34%)
    Frame 35 (35%)
    Frame 36 (36%)
    Frame 37 (37%)
    Frame 38 (38%)
    Frame 39 (39%)
    Frame 40 (40%)
    Frame 41 (41%)
    Frame 42 (42%)
    Frame 43 (43%)
    Frame 44 (44%)
    Frame 45 (45%)
    Frame 46 (46%)
    Frame 47 (47%)
    Frame 48 (48%)
    Frame 49 (49%)
    Frame 50 (50%)
    Frame 51 (51%)
    Frame 52 (52%)
    Frame 53 (53%)
    Frame 54 (54%)
    Frame 55 (55%)
    Frame 56 (56%)
    Frame 57 (57%)
    Frame 58 (58%)
    Frame 59 (59%)
    Frame 60 (60%)
    Frame 61 (61%)
    Frame 62 (62%)
    Frame 63 (63%)
    Frame 64 (64%)
    Frame 65 (65%)
    Frame 66 (66%)
    Frame 67 (67%)
    Frame 68 (68%)
    Frame 69 (69%)
    Frame 70 (70%)
    Frame 71 (71%)
    Frame 72 (72%)
    Frame 73 (73%)
    Frame 74 (74%)
    Frame 75 (75%)
    Frame 76 (76%)
    Frame 77 (77%)
    Frame 78 (78%)
    Frame 79 (79%)
    Frame 80 (80%)
    Frame 81 (81%)
    Frame 82 (82%)
    Frame 83 (83%)
    Frame 84 (84%)
    Frame 85 (85%)
    Frame 86 (86%)
    Frame 87 (87%)
    Frame 88 (88%)
    Frame 89 (89%)
    Frame 90 (90%)
    Frame 91 (91%)
    Frame 92 (92%)
    Frame 93 (93%)
    Frame 94 (94%)
    Frame 95 (95%)
    Frame 96 (96%)
    Frame 97 (97%)
    Frame 98 (98%)
    Frame 99 (99%)
    Frame 100 (100%)
    ## Finalizing encoding... done!

    p.KO <- MakeAnimation(subset(counts.long.merged, sig == jsig & genotype == "Liver_Cry1intronKO" & abs(pos) < pos.max),
                          nf = nf, ks = ks, jfps = jfps, 
                          plot.base = file.path(outdir, "KO_plot"))

    ## Saving 7 x 5 in image
    ## 
    Rendering [>--------------------------------------------------------------------------------------] at 2.3 fps ~ eta: 43s
    Rendering [=>-------------------------------------------------------------------------------------] at 2.3 fps ~ eta: 42s
    Rendering [==>------------------------------------------------------------------------------------] at 2.3 fps ~ eta: 42s
    Rendering [===>-----------------------------------------------------------------------------------] at 2.2 fps ~ eta: 43s
    Rendering [====>----------------------------------------------------------------------------------] at 2.2 fps ~ eta: 43s
    Rendering [=====>---------------------------------------------------------------------------------] at 2.2 fps ~ eta: 42s
    Rendering [======>--------------------------------------------------------------------------------] at 2.3 fps ~ eta: 41s
    Rendering [=======>-------------------------------------------------------------------------------] at 2.3 fps ~ eta: 40s
    Rendering [========>------------------------------------------------------------------------------] at 2.3 fps ~ eta: 40s
    Rendering [=========>-----------------------------------------------------------------------------] at 2.3 fps ~ eta: 39s
    Rendering [==========>----------------------------------------------------------------------------] at 2.3 fps ~ eta: 38s
    Rendering [===========>---------------------------------------------------------------------------] at 2.3 fps ~ eta: 37s
    Rendering [============>--------------------------------------------------------------------------] at 2.3 fps ~ eta: 37s
    Rendering [=============>-------------------------------------------------------------------------] at 2.3 fps ~ eta: 36s
    Rendering [==============>------------------------------------------------------------------------] at 2.3 fps ~ eta: 35s
    Rendering [===============>-----------------------------------------------------------------------] at 2.4 fps ~ eta: 35s
    Rendering [================>----------------------------------------------------------------------] at 2.4 fps ~ eta: 34s
    Rendering [=================>---------------------------------------------------------------------] at 2.4 fps ~ eta: 33s
    Rendering [==================>--------------------------------------------------------------------] at 2.4 fps ~ eta: 32s
    Rendering [===================>-------------------------------------------------------------------] at 2.4 fps ~ eta: 32s
    Rendering [====================>------------------------------------------------------------------] at 2.4 fps ~ eta: 31s
    Rendering [=====================>-----------------------------------------------------------------] at 2.5 fps ~ eta: 31s
    Rendering [======================>----------------------------------------------------------------] at 2.5 fps ~ eta: 30s
    Rendering [=======================>---------------------------------------------------------------] at 2.5 fps ~ eta: 29s
    Rendering [========================>--------------------------------------------------------------] at 2.5 fps ~ eta: 29s
    Rendering [=========================>-------------------------------------------------------------] at 2.5 fps ~ eta: 28s
    Rendering [==========================>------------------------------------------------------------] at 2.4 fps ~ eta: 28s
    Rendering [===========================>-----------------------------------------------------------] at 2.4 fps ~ eta: 28s
    Rendering [============================>----------------------------------------------------------] at 2.4 fps ~ eta: 28s
    Rendering [=============================>---------------------------------------------------------] at 2.4 fps ~ eta: 27s
    Rendering [==============================>--------------------------------------------------------] at 2.4 fps ~ eta: 27s
    Rendering [===============================>-------------------------------------------------------] at 2.4 fps ~ eta: 26s
    Rendering [================================>------------------------------------------------------] at 2.4 fps ~ eta: 26s
    Rendering [=================================>-----------------------------------------------------] at 2.4 fps ~ eta: 26s
    Rendering [==================================>----------------------------------------------------] at 2.4 fps ~ eta: 25s
    Rendering [===================================>---------------------------------------------------] at 2.4 fps ~ eta: 25s
    Rendering [====================================>--------------------------------------------------] at 2.4 fps ~ eta: 25s
    Rendering [====================================>--------------------------------------------------] at 2.3 fps ~ eta: 25s
    Rendering [=====================================>-------------------------------------------------] at 2.3 fps ~ eta: 24s
    Rendering [======================================>------------------------------------------------] at 2.3 fps ~ eta: 24s
    Rendering [=======================================>-----------------------------------------------] at 2.3 fps ~ eta: 23s
    Rendering [========================================>----------------------------------------------] at 2.3 fps ~ eta: 23s
    Rendering [=========================================>---------------------------------------------] at 2.3 fps ~ eta: 23s
    Rendering [==========================================>--------------------------------------------] at 2.3 fps ~ eta: 22s
    Rendering [===========================================>-------------------------------------------] at 2.3 fps ~ eta: 22s
    Rendering [===========================================>-------------------------------------------] at 2.3 fps ~ eta: 21s
    Rendering [============================================>------------------------------------------] at 2.3 fps ~ eta: 21s
    Rendering [=============================================>-----------------------------------------] at 2.3 fps ~ eta: 21s
    Rendering [==============================================>----------------------------------------] at 2.3 fps ~ eta: 20s
    Rendering [===============================================>---------------------------------------] at 2.3 fps ~ eta: 20s
    Rendering [================================================>--------------------------------------] at 2.3 fps ~ eta: 19s
    Rendering [=================================================>-------------------------------------] at 2.3 fps ~ eta: 19s
    Rendering [==================================================>------------------------------------] at 2.2 fps ~ eta: 18s
    Rendering [===================================================>-----------------------------------] at 2.2 fps ~ eta: 18s
    Rendering [====================================================>----------------------------------] at 2.2 fps ~ eta: 18s
    Rendering [=====================================================>---------------------------------] at 2.2 fps ~ eta: 17s
    Rendering [======================================================>--------------------------------] at 2.2 fps ~ eta: 17s
    Rendering [=======================================================>-------------------------------] at 2.2 fps ~ eta: 16s
    Rendering [========================================================>------------------------------] at 2.2 fps ~ eta: 16s
    Rendering [=========================================================>-----------------------------] at 2.2 fps ~ eta: 15s
    Rendering [==========================================================>----------------------------] at 2.2 fps ~ eta: 15s
    Rendering [===========================================================>---------------------------] at 2.2 fps ~ eta: 14s
    Rendering [============================================================>--------------------------] at 2.1 fps ~ eta: 14s
    Rendering [=============================================================>-------------------------] at 2.1 fps ~ eta: 14s
    Rendering [==============================================================>------------------------] at 2.1 fps ~ eta: 13s
    Rendering [===============================================================>-----------------------] at 2.1 fps ~ eta: 13s
    Rendering [===============================================================>-----------------------] at 2.1 fps ~ eta: 12s
    Rendering [================================================================>----------------------] at 2.1 fps ~ eta: 12s
    Rendering [=================================================================>---------------------] at 2.1 fps ~ eta: 11s
    Rendering [==================================================================>--------------------] at 2.1 fps ~ eta: 11s
    Rendering [===================================================================>-------------------] at 2.1 fps ~ eta: 10s
    Rendering [====================================================================>------------------] at 2.1 fps ~ eta: 10s
    Rendering [=====================================================================>-----------------] at 2.1 fps ~ eta:  9s
    Rendering [======================================================================>----------------] at 2.1 fps ~ eta:  9s
    Rendering [=======================================================================>---------------] at 2.1 fps ~ eta:  8s
    Rendering [========================================================================>--------------] at 2.1 fps ~ eta:  8s
    Rendering [=========================================================================>-------------] at 2.1 fps ~ eta:  7s
    Rendering [==========================================================================>------------] at 2.1 fps ~ eta:  7s
    Rendering [===========================================================================>-----------] at 2.1 fps ~ eta:  6s
    Rendering [============================================================================>----------] at 2.1 fps ~ eta:  6s
    Rendering [============================================================================>----------] at 2.1 fps ~ eta:  5s
    Rendering [=============================================================================>---------] at 2.1 fps ~ eta:  5s
    Rendering [==============================================================================>--------] at 2.1 fps ~ eta:  4s
    Rendering [===============================================================================>-------] at 2.1 fps ~ eta:  4s
    Rendering [================================================================================>------] at 2.1 fps ~ eta:  3s
    Rendering [=================================================================================>-----] at 2.1 fps ~ eta:  3s
    Rendering [==================================================================================>----] at 2.1 fps ~ eta:  2s
    Rendering [===================================================================================>---] at 2.2 fps ~ eta:  2s
    Rendering [===================================================================================>---] at 2.2 fps ~ eta:  1s
    Rendering [====================================================================================>--] at 2.2 fps ~ eta:  1s
    Rendering [=====================================================================================>-] at 2.2 fps ~ eta:  0s
    Rendering [=======================================================================================] at 2.2 fps ~ eta:  0s
                                                                                                                             

    ## 
    Frame 1 (1%)
    Frame 2 (2%)
    Frame 3 (3%)
    Frame 4 (4%)
    Frame 5 (5%)
    Frame 6 (6%)
    Frame 7 (7%)
    Frame 8 (8%)
    Frame 9 (9%)
    Frame 10 (10%)
    Frame 11 (11%)
    Frame 12 (12%)
    Frame 13 (13%)
    Frame 14 (14%)
    Frame 15 (15%)
    Frame 16 (16%)
    Frame 17 (17%)
    Frame 18 (18%)
    Frame 19 (19%)
    Frame 20 (20%)
    Frame 21 (21%)
    Frame 22 (22%)
    Frame 23 (23%)
    Frame 24 (24%)
    Frame 25 (25%)
    Frame 26 (26%)
    Frame 27 (27%)
    Frame 28 (28%)
    Frame 29 (29%)
    Frame 30 (30%)
    Frame 31 (31%)
    Frame 32 (32%)
    Frame 33 (33%)
    Frame 34 (34%)
    Frame 35 (35%)
    Frame 36 (36%)
    Frame 37 (37%)
    Frame 38 (38%)
    Frame 39 (39%)
    Frame 40 (40%)
    Frame 41 (41%)
    Frame 42 (42%)
    Frame 43 (43%)
    Frame 44 (44%)
    Frame 45 (45%)
    Frame 46 (46%)
    Frame 47 (47%)
    Frame 48 (48%)
    Frame 49 (49%)
    Frame 50 (50%)
    Frame 51 (51%)
    Frame 52 (52%)
    Frame 53 (53%)
    Frame 54 (54%)
    Frame 55 (55%)
    Frame 56 (56%)
    Frame 57 (57%)
    Frame 58 (58%)
    Frame 59 (59%)
    Frame 60 (60%)
    Frame 61 (61%)
    Frame 62 (62%)
    Frame 63 (63%)
    Frame 64 (64%)
    Frame 65 (65%)
    Frame 66 (66%)
    Frame 67 (67%)
    Frame 68 (68%)
    Frame 69 (69%)
    Frame 70 (70%)
    Frame 71 (71%)
    Frame 72 (72%)
    Frame 73 (73%)
    Frame 74 (74%)
    Frame 75 (75%)
    Frame 76 (76%)
    Frame 77 (77%)
    Frame 78 (78%)
    Frame 79 (79%)
    Frame 80 (80%)
    Frame 81 (81%)
    Frame 82 (82%)
    Frame 83 (83%)
    Frame 84 (84%)
    Frame 85 (85%)
    Frame 86 (86%)
    Frame 87 (87%)
    Frame 88 (88%)
    Frame 89 (89%)
    Frame 90 (90%)
    Frame 91 (91%)
    Frame 92 (92%)
    Frame 93 (93%)
    Frame 94 (94%)
    Frame 95 (95%)
    Frame 96 (96%)
    Frame 97 (97%)
    Frame 98 (98%)
    Frame 99 (99%)
    Frame 100 (100%)
    ## Finalizing encoding... done!

    # print(p.WT)
    # print(p.KO)

    # animate(p.WT, fps = 50, renderer = gifski_renderer())
    # animate(p.KO, fps = 50, renderer = gifski_renderer())
